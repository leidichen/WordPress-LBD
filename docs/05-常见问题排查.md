# 05｜常见问题排查

## 1. 主题切换按钮点击无效

排查顺序：

1. 检查 `header.php` 是否存在 `#theme-toggle` 按钮。
2. 检查 `functions.php` 中 `yayu_load_style()` 是否正常执行。
3. 打开浏览器控制台，确认无脚本语法错误。
4. 检查 `localStorage.dear-theme` 是否可读写。

## 2. 刷新后亮暗状态丢失

排查顺序：

1. 确认浏览器未禁用本地存储。
2. 检查脚本中是否仍使用键名 `dear-theme`。
3. 确认 `body.light-theme` 的样式变量定义完整。

## 3. 闪念页面不显示内容

排查顺序：

1. 后台“自定义 > 闪念设置”确认分类标识（slug）。
2. 检查该分类是否真实存在且有文章。
3. 检查是否被 `pre_get_posts` 的排除逻辑误伤。

## 4. 闪念图片点击无反应或轮播异常

排查顺序：

1. 检查图片 HTML 结构是否仍在预期容器内。
2. 检查 data 属性（图片列表数据）是否格式正确。
3. 查看控制台是否有 JSON 解析错误。
4. 验证关闭、切图、键盘 ESC 是否正常。

## 5. 周刊卡片布局错乱

排查顺序：

1. 检查 `weekly` 分类是否存在。
2. 检查后台周刊设置的列数和间距是否为有效值。
3. 检查 `functions.php` 输出的动态样式是否生效。
4. 在 768px 与 480px 断点分别验证布局。

## 6. 归档页显示异常

排查顺序：

1. 确认 `archive.php` 中 weekly 与普通分类分支条件。
2. 检查 `paginate_links()` 是否在归档页输出。
3. 若出现 PHP 报错，优先检查最近改动的条件块与括号配对。
