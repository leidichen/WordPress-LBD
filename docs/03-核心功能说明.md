# 03｜核心功能说明

## 1. 亮暗主题切换

实现位置：`header.php` + `functions.php` + `assets/css/base.css`

- `header.php` 提供切换按钮（`#theme-toggle`）。
- `functions.php` 内联脚本负责：
  - 切换 `body.light-theme` 类
  - 持久化用户偏好到 `localStorage.dear-theme`
- `assets/css/base.css` 使用 CSS 变量定义亮暗两套视觉方案。

开发注意：

- 新增颜色时必须同时定义暗色与亮色变量。
- 不要在组件中硬编码颜色，优先使用变量。

## 2. 闪念页面（Idea）

实现位置：`idea.php` + `assets/css/idea.css` + `assets/js/idea-page.js` + `functions.php`

能力包括：

- 按“闪念分类标识（slug）”拉取文章并卡片化展示
- 长文本折叠/展开
- 图片查看与画廊浏览
- 卡片圆角、截断长度可配置

开发注意：

- 闪念分类优先按 slug 匹配，未命中时回退按分类名称匹配。
- 图片交互脚本为按需加载，修改时需回归测试点击、关闭、切图、键盘操作。

## 3. 博客页面（Blog）

实现位置：`blog.php` + `assets/css/blog.css` + `functions.php`

能力包括：

- 聚合全部博客文章（默认排除闪念与周刊分类）
- 按年月分组展示文章列表

开发注意：

- 博客页面用于承载“标准博客文章”主线，建议与闪念/周刊保持内容边界清晰。
- 若调整排除规则，优先修改 `blog.php` 查询参数并回归验证分类互斥关系。

## 4. 周刊页面（Weekly）

实现位置：`weekly.php` + `archive.php` + `functions.php`

能力包括：

- `weekly` 分类卡片网格展示
- 支持后台调整列数与间距
- 自动读取封面图（无图显示占位）

开发注意：

- 需同时验证独立周刊模板与归档中的 weekly 特殊分支。
- 响应式断点下卡片高度和排版应保持一致。

## 5. 归档与搜索

- `archive.php`：普通分类列表 + weekly 特殊卡片展示
- `search.php`：关键词查询与结果列表

开发注意：

- `archive.php` 涉及条件分支，改动时避免影响非 weekly 分类。
- 搜索模板保持纯文本风格，避免引入复杂组件。

## 6. 性能与“轻量化”策略

主要在 `functions.php` 中体现：

- 关闭不必要功能（例如部分 REST/Emoji/区块编辑器相关加载）
- 减少前端资源开销
- 保持页面结构与交互简洁

开发注意：

- 新增功能前先判断是否必须。
- 若引入外部依赖，需说明收益、体积成本和回退方案。
